{"version":3,"sources":["components/Controls/Controls.module.css","components/Balance/Balance.module.css","components/TransactionHistory/TransactionHistory.module.css","components/Dashboard/Dashboard.module.css","components/Controls/Controls.jsx","components/Balance/Balance.jsx","components/TransactionHistory/TransactionHistory.jsx","services/storage.js","components/Dashboard/Dashboard.jsx","components/App/App.jsx","index.js"],"names":["module","exports","Controls","state","amount","handleInput","e","value","target","setState","Number","handleClick","name","props","onDeposit","onWithdraw","className","styles","controls","type","id","this","amountId","onChange","onClick","Component","Balance","withdraw","deposit","balance","TransactionHistory","allTransactions","history","map","item","date","key","localStorage","setItem","JSON","stringify","err","console","log","transaction","getItem","parse","Dashboard","transactions","generateIds","amountInput","shortid","generate","handleDeposit","toast","error","income","Date","toLocaleString","handleWithdraw","storage","prevProps","prevState","transactionAmounts","reduce","acc","t","expenses","dashboard","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1dcf62c0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"Controls_controls__1n9H8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"balance\":\"Balance_balance__31-S1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"TransactionHistory_history__CT2TH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboard\":\"Dashboard_dashboard__p4DRQ\"};","import React, { Component } from 'react';\nimport styles from './Controls.module.css';\n\nclass Controls extends Component {\n  state = {\n    amount: '',\n  };\n\n  handleInput = e => {\n    const value = e.target.value;\n    this.setState({\n      amount: Number(value),\n    });\n  };\n\n  handleClick = e => {\n    e.target.name === 'deposit'\n      ? this.props.onDeposit(Number(this.state.amount))\n      : this.props.onWithdraw(Number(this.state.amount));\n\n    this.setState({\n      amount: '',\n    });\n  };\n\n  render() {\n    return (\n      <section className={styles.controls}>\n        <input\n          type=\"number\"\n          name=\"amount\"\n          id={this.props.amountId}\n          onChange={this.handleInput}\n          value={this.state.amount}\n        />\n\n        <button type=\"button\" name=\"deposit\" onClick={this.handleClick}>\n          Deposit\n        </button>\n\n        <button type=\"button\" name=\"withdraw\" onClick={this.handleClick}>\n          Withdraw\n        </button>\n      </section>\n    );\n  }\n}\n\nexport default Controls;\n","import React from 'react';\nimport styles from './Balance.module.css';\n\nconst Balance = ({ withdraw, deposit, balance }) => (\n  <section className={styles.balance}>\n    <span>{withdraw}$</span>\n    <span>{deposit}$</span>\n    <span>Balance: {balance}$</span>\n  </section>\n);\n\nexport default Balance;\n","import React from 'react';\nimport styles from './TransactionHistory.module.css';\n\nconst TransactionHistory = ({ allTransactions }) => (\n  <table className={styles.history}>\n    <thead>\n      <tr>\n        <th>Transaction</th>\n        <th>Amount</th>\n        <th>Date</th>\n      </tr>\n    </thead>\n    <tbody>\n      {allTransactions.map(item => {\n        const { id, type, amount, date } = item;\n        return (\n          <tr key={id}>\n            <td>{type}</td>\n            <td>{amount}$</td>\n            <td>{date}</td>\n          </tr>\n        );\n      })}\n    </tbody>\n  </table>\n);\n\nexport default TransactionHistory;\n","const save = (key, value) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst get = key => {\n  try {\n    const transaction = localStorage.getItem(key);\n\n    return transaction ? JSON.parse(transaction) : null;\n  } catch (e) {\n    console.log('err');\n  }\n\n  return null;\n};\nexport default {\n  save,\n  get,\n};\n","import React, { Component } from 'react';\nimport shortid from 'shortid';\nimport Controls from '../Controls/Controls';\nimport Balance from '../Balance/Balance';\nimport TransactionHistory from '../TransactionHistory/TransactionHistory';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport storage from '../../services/storage';\nimport styles from './Dashboard.module.css';\n\nclass Dashboard extends Component {\n  state = {\n    transactions: [],\n    balance: 0,\n  };\n\n  generateIds = {\n    amountInput: shortid.generate(),\n  };\n\n  componentDidMount() {\n    const transactions = storage.get('transactions');\n    const balance = storage.get('balance');\n    if (transactions) {\n      this.setState({ balance, transactions });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { transactions, balance } = this.state;\n\n    if (prevState.transactions !== transactions) {\n      storage.save('transactions', transactions);\n      storage.save('balance', balance);\n    }\n  }\n\n  handleDeposit = amount => {\n    if (amount <= 0) {\n      toast.error('Введите корректную сумму для проведения операции!');\n      return;\n    }\n    const income = {\n      id: shortid.generate(),\n      type: 'income',\n      amount: amount,\n      date: new Date().toLocaleString(),\n    };\n    this.setState(state => ({\n      balance: state.balance + amount,\n      transactions: [...state.transactions, income],\n    }));\n  };\n\n  handleWithdraw = amount => {\n    if (amount > this.state.balance) {\n      toast.error('На счету недостаточно средств для проведения операции!');\n      return;\n    } else if (amount <= 0) {\n      toast.error('Введите сумму для проведения операции!');\n    } else {\n      const withdraw = {\n        id: shortid.generate(),\n        type: 'expenses',\n        amount: amount,\n        date: new Date().toLocaleString(),\n      };\n\n      this.setState(state => ({\n        balance: state.balance - amount,\n        transactions: [...state.transactions, withdraw],\n      }));\n    }\n  };\n\n  render() {\n    const { transactions, balance } = this.state;\n    const { amountInput } = this.generateIds;\n\n    const transactionAmounts = transactions.reduce(\n      (acc, t) => {\n        return {\n          ...acc,\n          [t.type]: t.amount + acc[t.type],\n        };\n      },\n      { income: 0, expenses: 0 },\n    );\n    return (\n      <div className={styles.dashboard}>\n        <Controls\n          amountId={amountInput}\n          onDeposit={this.handleDeposit}\n          onWithdraw={this.handleWithdraw}\n        />\n\n        <Balance\n          withdraw={transactionAmounts.expenses}\n          deposit={transactionAmounts.income}\n          balance={balance}\n        />\n\n        <TransactionHistory allTransactions={transactions} />\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n","import React from 'react';\nimport Dashboard from '../Dashboard/Dashboard';\n\nconst App = () => <Dashboard />;\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport './style.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}